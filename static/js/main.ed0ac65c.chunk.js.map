{"version":3,"sources":["context/GameContext.js","componentes/CardComponent.js","componentes/cards.js","componentes/players.js","pages/Lobby.js","pages/Home.js","pages/Chat.js","serviceWorker.js","index.js"],"names":["gameContext","React","createContext","CardComponent","card","isFaceUp","player","isKnock","pile","history","useHistory","useState","isFaceUpState","setIsFaceUpSate","useContext","GameContext","discardPile","setDiscardPile","deck","setDeck","gameState","setGameState","currentCard","setCurrentCard","players","setPlayers","useEffect","checkGinPlayer","calcDeadwood","score","alert","push","name","className","onClick","e","preventDefault","hand","tmpDiscard","shift","tmpPile","unshift","splice","indexOf","value","faceUpClicked","length","tmpDeck","forEach","c","index","possibleMelds","map","meld","deadwoodCards","suit","theirDeadwood","Math","abs","faceDownClicked","style","backgroundImage","process","toUpperCase","mapToPNG","Card","this","suits","HEARTS","CLUBS","SPADES","DIAMONDS","Player","bestMelds","deadwood","bestMeld","otherCards","melds","cardsInMeld","cardContested","meldValue","meld2","index2","melds2","cardIndex","includes","card2","cardIndex2","highestEffeciency","highestEfficiencyIndex","cardCounts","contestedCards","sum","isInArray","obj","count","intersection","filter","efficiency","max","sortedHand","hearts","diamonds","clubs","spades","sort","card1","i","tmpMeld","j","cards","nextCard","highestValueMeld","possibleMeldsTmp","checkHandForSets","filterMelds","getMelds","isCardInMeld","a1","a2","a","diff","k","discardLength","deckLength","previousHandState","discardCard","deckCard","tmpPile2","highestValCard","cardToDiscardIndex","cardToDiscard","flat","highestVal","Lobby","playerName","setPlayerName","isFindingGame","setIsFindingGame","onSubmit","sleepInterval","floor","random","setTimeout","findGame","htmlFor","type","id","placeholder","onChange","target","Home","hasDealt","setHasDealt","_setGameState","prevGameState","setPrevGameState","state","dealBtnRef","useRef","undefined","Object","keys","newCard","generateDeck","current","click","opponentTurn","Provider","userPlayer","duplicates","otherTmpDeck","deal","ref","key","gameStateMap","flexGrow","Message","sender","text","timestamp","Date","now","Chat","messages","setMessages","currentMessage","setCurrentMessage","convertToCSV","objArray","array","JSON","parse","str","line","sendChatData","url","fetch","method","mode","headers","body","stringify","results2send","minute","sec","timer","setInterval","clearInterval","document","getElementById","innerHTML","message","currentMessages","sendMessage","messageChange","disabled","Boolean","window","location","hostname","match","App","basename","exact","path","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console"],"mappings":"qWAIeA,G,MAFKC,IAAMC,cAAc,KCkOzBC,G,MA/NO,SAAC,GAAmD,IAAlDC,EAAiD,EAAjDA,KAAMC,EAA2C,EAA3CA,SAAUC,EAAiC,EAAjCA,OAAiC,IAAzBC,eAAyB,SAAVC,EAAU,EAAVA,KACrDC,EAAUC,cADqD,EAG5BC,oBAAS,GAHmB,mBAG9DC,EAH8D,KAG/CC,EAH+C,OAI2DC,qBAAWC,GAApIC,EAJ8D,EAI9DA,YAAaC,EAJiD,EAIjDA,eAAgBC,EAJiC,EAIjCA,KAAMC,EAJ2B,EAI3BA,QAASC,EAJkB,EAIlBA,UAAWC,EAJO,EAIPA,aAAcC,EAJP,EAIOA,YAAaC,EAJpB,EAIoBA,eAAgBC,EAJpC,EAIoCA,QAJpC,EAI6CC,WAElHC,qBAAU,WACNb,EAAgBR,KACjB,IAEH,IA0BMsB,EAAiB,WACc,GAA7BH,EAAQ,GAAGI,iBACXJ,EAAQ,GAAGK,OAAS,GAAKL,EAAQ,GAAGI,eAKhCJ,EAAQ,GAAGK,OAAS,KACpBC,MAAM,wBACNrB,EAAQsB,KAAK,OAEbD,MAAM,2BAAD,OAA4B,GAAGN,EAAQ,GAAGI,eAA1C,YACLnB,EAAQsB,KAAK,WAKY,GAA7BP,EAAQ,GAAGI,iBAGXJ,EAAQ,GAAGK,OAAS,GAAKL,EAAQ,GAAGI,eAKhCJ,EAAQ,GAAGK,OAAS,KACpBC,MAAM,GAAD,OAAIN,EAAQ,GAAGQ,KAAf,sBACLvB,EAAQsB,KAAK,OAEbD,MAAM,GAAD,OAAIN,EAAQ,GAAGQ,KAAf,gCAA2C,GAAGR,EAAQ,GAAGI,eAAzD,YACLnB,EAAQsB,KAAK,YA0IzB,OACI,oCACK3B,GACG,yBAAK6B,UAAU,OACXC,QAAS,SAAAC,GAAC,OAAIvB,EAzIR,SAAAuB,GAGlB,GAFAR,IAEY,MAARrB,GAA2B,QAAXc,EAAmB,CACnCe,EAAEC,iBACFZ,EAAQ,GAAGa,KAAKN,KAAK3B,GACrB,IAAIkC,EAAU,YAAOtB,GAErBsB,EAAWC,QACXtB,EAAeqB,GACfd,EAAQ,GAAGI,eAEXP,EAAa,WAGjB,GAAIf,IAASkB,EAAQ,IAAiB,WAAXJ,EAGvB,GAFAe,EAAEC,iBAEEZ,EAAQ,GAAGI,eAAiB,GAAI,CAChC,IAAIY,EAAO,YAAOxB,GAClBwB,EAAQC,QAAQrC,GAChBa,EAAeuB,GACfhB,EAAQ,GAAGa,KAAKK,OAAOlB,EAAQ,GAAGa,KAAKM,QAAQvC,GAAO,GAEtDiB,EAAa,iBACV,GAAIG,EAAQ,GAAGI,gBAAkBxB,EAAKwC,MAAM,GAAKxC,EAAKwC,MAAQ,MAAQ,EAAG,CAC5E,IAAIJ,EAAO,YAAOxB,GAClBwB,EAAQC,QAAQrC,GAChBa,EAAeuB,GACfhB,EAAQ,GAAGa,KAAKK,OAAOlB,EAAQ,GAAGa,KAAKM,QAAQvC,GAAO,GACtDuB,SAGAN,EAAa,iBACbE,EAAenB,GAIvB,GAAe,WAAXI,EAAKwB,MAA8B,iBAAXZ,EAA4B,CAChD,IAAIoB,EAAO,YAAOxB,GAElBwB,EAAQC,QAAQnB,GAChBL,EAAeuB,GACfhB,EAAQ,GAAGa,KAAKK,OAAOlB,EAAQ,GAAGa,KAAKM,QAAQrB,GAAc,GAE7DD,EAAa,aA4FqBwB,CAAcV,GAxFpC,SAAAA,GAGpB,GAFAR,IAEY,MAARrB,GAA2B,QAAXc,EAAmB,CACnCe,EAAEC,iBACFZ,EAAQ,GAAGa,KAAKN,KAAK3B,GACrB,IAAIoC,EAAO,YAAOtB,GAGlB,GAFAsB,EAAQE,OAAOF,EAAQG,QAAQvC,GAAO,GAElCc,EAAK4B,OAAS,EAAG,CACjB,IAAIR,EAAU,YAAOtB,GACjB+B,EAAUT,EACdA,EAAa,CAACA,EAAW,IAEzBS,EAAQC,SAAQ,SAACC,EAAGC,GACZD,GAAKX,EAAW,IAChBS,EAAQL,OAAOQ,EAAO,MAG9BjC,EAAeqB,GAGnBnB,EAAQqB,GAERnB,EAAa,WAGjB,GAAId,GAAsB,iBAAXa,EAA4B,CACvCI,EAAQ,GAAGI,eAEXJ,EAAQ,GAAG2B,cAAcC,KAAI,SAAAC,GACN,GAAfA,EAAKP,QAELtB,EAAQ,GAAG8B,cAAcF,KAAI,SAAChD,EAAM8C,GAC5BG,EAAK,GAAGT,OAASS,EAAK,GAAGT,OAASxC,EAAKwC,QAKtCS,EAAK,GAAGE,MAAQF,EAAK,GAAGE,MAAQnD,EAAKmD,MAAWnD,EAAKwC,OAASS,EAAK,GAAGT,MAAM,GAAOxC,EAAKwC,OAASS,EAAK,GAAGT,MAAM,IAHhHpB,EAAQ,GAAG8B,cAAcZ,OAAOQ,EAAO,SAavD,IAAIM,EAAgB,EACpBhC,EAAQ,GAAG8B,cAAcF,KAAI,SAAAhD,GACzBoD,GAAkBpD,EAAKwC,MAAM,GAAKxC,EAAKwC,MAAQ,MAEnDpB,EAAQ,GAAGK,OAAS2B,EAAgBhC,EAAQ,GAAGI,eAG3CJ,EAAQ,GAAGK,OAAS,KACpBC,MAAM,wBACNrB,EAAQsB,KAAK,OAEbD,MAAM,mBAAD,OAAoB0B,EAAgBhC,EAAQ,GAAGI,gBAAkB,EAAI,SAAW,OAAhF,YAA0F6B,KAAKC,IAAIF,EAAgBhC,EAAQ,GAAGI,gBAA9H,YACLnB,EAAQsB,KAAK,WA2BwC4B,CAAgBxB,IACjEyB,MAAO,CACHC,gBAAiBtD,EAAO,eAAWuD,IAAX,2CACZA,IAAA,uBAAyClD,EAzMxD,SAAAR,GACb,IAAIwC,EACJ,OAAQxC,EAAKwC,OACT,KAAK,EACDA,EAAQ,IACR,MAEJ,KAAK,GACDA,EAAQ,IACR,MAEJ,KAAK,GACDA,EAAQ,IACR,MAEJ,KAAK,GACDA,EAAQ,IACR,MAEJ,QACIA,EAAQxC,EAAKwC,MAGrB,MAAM,GAAN,OAAUA,GAAV,OAAkBxC,EAAKmD,KAAK,GAAGQ,cAA/B,QAmL0BC,CAAS5D,GACT,mBAHc,Y,OCvN1C6D,EAIF,WAAYV,EAAMX,GAAQ,yBAH1BW,KAAO,KAGkB,KAFzBX,MAAQ,EAGJsB,KAAKX,KAAOA,EACZW,KAAKtB,MAAQA,GAIfuB,EAAQ,CACVC,OAAQ,SACRC,MAAO,QACPC,OAAQ,SACRC,SAAU,Y,QCiUCC,E,WAjUX,WAAYxC,GAAO,yBAVnBA,KAAO,GAUW,KATlBH,MAAQ,EASU,KARlBQ,KAAO,GAQW,KAPlBc,cAAgB,GAOE,KANlBsB,UAAY,GAMM,KALlBzD,YAAc,GAKI,KAJlBE,KAAO,GAIW,KAHlBoC,cAAgB,GAGE,KAFlBoB,SAAW,EAGPR,KAAKlC,KAAOA,E,+DAGI,IAAD,OAEX2C,EAAW,KACXC,EAAa,GAgCjB,OA/BAV,KAAKf,cAAcC,KAAI,SAACC,EAAMH,EAAO2B,GACjC,IAAIC,EAAczB,EACd0B,GAAgB,EAChBC,EAAY,EAChB,EAAK7B,cAAcC,KAAI,SAAC6B,EAAOC,EAAQC,GAC/BjC,GAASgC,GAETD,EAAM7B,KAAI,SAAChD,EAAMgF,GAEbR,EAAW7C,KAAK3B,GACZ0E,EAAYO,SAASjF,KACrB2E,GAAgB,SAKhC1B,EAAKD,KAAI,SAACkC,EAAOC,GACRX,EAAWS,SAASC,KAErBN,GAAYM,EAAM1C,MAAQ,GAAK0C,EAAM1C,MAAQ,OAGjDmC,IAEAC,GAAa,KAEbA,GA7BY,IA+BZL,EAAWtB,MAGZsB,I,0CAGU,IAAD,OACZa,EAAoB,EACpBC,EAAyB,EAEzBC,EAAa,GACbC,EAAiB,GAiDrB,OA/CAzB,KAAKf,cAAcC,KAAI,SAACC,EAAMH,EAAO2B,GACjC,IAAIe,EAAM,EACVvC,EAAKD,KAAI,SAAAhD,GAEL,IAAIyF,GAAY,EAChBH,EAAWtC,KAAI,SAAA0C,GACPA,EAAI1F,KAAKwC,OAASxC,EAAKwC,OAASkD,EAAI1F,KAAKmD,MAAQnD,EAAKmD,OACtDsC,GAAY,MAIhBA,EACAH,EAAWtC,KAAI,SAAA0C,GACPA,EAAI1F,KAAKwC,OAASxC,EAAKwC,OAASkD,EAAI1F,KAAKmD,MAAQnD,EAAKmD,MACtDuC,EAAIC,WAIZL,EAAW3D,KAAK,CAAC3B,OAAM2F,MAAO,IAElCH,GAAMxF,EAAKwC,MAAQ,GAAKxC,EAAKwC,MAAQ,MAGzC8C,EAAWtC,KAAI,SAAA0C,GACPA,EAAIC,MAAQ,GAAGJ,EAAe5D,KAAK+D,EAAI1F,SAG/C,IAAI4F,EAAe3C,EAAK4C,QAAO,SAAArD,GAAK,OAAI+C,EAAeN,SAASzC,MAK5DsD,EAAaN,GAAOI,EAAalD,OAAO,EAAIkD,EAAalD,OAAS,GAIlEoD,EAAaV,GACbA,EAAoBU,EACpBT,EAAyBvC,GAClBgD,GAAcV,GAErB,EAAKf,UAAU1C,KAAKsB,MAKba,KAAKf,cAAcsC,K,yCAIb,IAAD,OAAPU,EAAO,uDAAH,EACjBjC,KAAKf,cAAgB,GACrB,IAAIiD,EAAU,YAAOlC,KAAK7B,MAEtBgE,EAASD,EAAWH,QAAO,SAAA7F,GAAI,MAAiB,UAAbA,EAAKmD,QACxC+C,EAAWF,EAAWH,QAAO,SAAA7F,GAAI,MAAiB,YAAbA,EAAKmD,QAC1CgD,EAAQH,EAAWH,QAAO,SAAA7F,GAAI,MAAiB,SAAbA,EAAKmD,QACvCiD,EAASJ,EAAWH,QAAO,SAAA7F,GAAI,MAAiB,UAAbA,EAAKmD,QAE5C8C,EAAOI,MAAK,SAACC,EAAOpB,GAAR,OAAkBoB,EAAM9D,MAAQ0C,EAAM1C,SAClD0D,EAASG,MAAK,SAACC,EAAOpB,GAAR,OAAkBoB,EAAM9D,MAAQ0C,EAAM1C,SACpD2D,EAAME,MAAK,SAACC,EAAOpB,GAAR,OAAkBoB,EAAM9D,MAAQ0C,EAAM1C,SACjD4D,EAAOC,MAAK,SAACC,EAAOpB,GAAR,OAAkBoB,EAAM9D,MAAQ0C,EAAM1C,SAElDwD,EAAU,sBAAOC,GAAP,YAAkBC,GAAlB,YAA+BC,GAA/B,YAAyCC,IAEnD,IAhBoB,eAgBXG,GACL,IAAIC,EAAU,GACVC,EAAI,EACR,EAAKxE,KAAKe,KAAI,SAAAhD,GACNA,EAAKwC,OAAS+D,IACdC,EAAQ7E,KAAK3B,GACbyG,QAGJA,GAAGV,GACH,EAAKhD,cAAcpB,KAAK6E,IAVvBD,EAAE,EAAGA,EAAE,GAAIA,IAAM,EAAjBA,GAcT,IAAIE,EAAI,EACJD,EAAU,GACdR,EAAWhD,KAAI,SAAChD,EAAM8C,EAAO4D,GACzB,GAAI5D,GAASkD,EAAWtD,OAAO,EAAG,CAC9B,IAAIiE,EAAWD,EAAM5D,EAAM,GACvB6D,EAASnE,OAASxC,EAAKwC,MAAQ,GAAKmE,EAASxD,MAAQnD,EAAKmD,MAC1DsD,IACAD,EAAQ7E,KAAK3B,GACT8C,GAASkD,EAAWtD,OAAO,GAAK+D,GAAG,IACnCD,EAAQ7E,KAAKgF,GACTH,EAAQ9D,OAAS,GACjB,EAAKK,cAAcpB,KAAK6E,MAI5BC,GAAGV,IACHS,EAAQ7E,KAAK3B,GACTwG,EAAQ9D,OAAS,GACjB,EAAKK,cAAcpB,KAAK6E,IAGhCC,EAAI,EACJD,EAAU,U,oCAQtB,IAAIjC,EAAWT,KAAK8C,mBACpB9C,KAAKO,UAAU1C,KAAK4C,GAEpB,IAAIsC,EAAgB,YAAO/C,KAAKf,eAIhC8D,EAAiB7D,KAAI,SAACC,EAAMH,GACxByB,EAASvB,KAAI,SAAAhD,GACNiD,EAAKgC,SAASjF,IACb6G,EAAiBvE,OAAOQ,EAAO,SAQ3CgB,KAAKf,cAAgB8D,I,iCAOrB,IAFA/C,KAAKO,UAAY,GACjBP,KAAKgD,mBACEhD,KAAKf,cAAcL,OAAS,GAC/BoB,KAAKiD,gB,qCAIG,IAAD,OACXjD,KAAKZ,cAAgB,GACrBY,KAAKkD,WACL,IAAIxE,EAAQ,EAeZ,OAbAsB,KAAK7B,KAAKe,KAAI,SAAAhD,GACV,IAAIiH,GAAe,EACnB,EAAK5C,UAAUrB,KAAI,SAAAC,GACXA,EAAKgC,SAASjF,KACdiH,GAAe,MAGlBA,IACDzE,GAAQxC,EAAKwC,MAAM,GAAKxC,EAAKwC,MAAQ,GACrC,EAAKU,cAAcvB,KAAK3B,OAGhC8D,KAAKQ,SAAW9B,EACTA,I,8BAIH0E,EAAIC,GAIR,IAFA,IAAIC,EAAI,GAAIC,EAAO,GAEVd,EAAI,EAAGA,EAAIW,EAAGxE,OAAQ6D,IAC3Ba,EAAEF,EAAGX,KAAM,EAGf,IAASA,EAAI,EAAGA,EAAIY,EAAGzE,OAAQ6D,IACvBa,EAAED,EAAGZ,WACEa,EAAED,EAAGZ,IAEZa,EAAED,EAAGZ,KAAM,EAInB,IAAK,IAAIe,KAAKF,EACVC,EAAK1F,KAAK2F,GAGd,OAAOD,I,qCAGK,IAAD,OAGX,GAFAvD,KAAKkD,WAEsB,GAAvBlD,KAAKtC,oBAEF,CACHsC,KAAKgD,iBAAiB,GAEtB,IAAIS,EAAeC,EAGfC,EAAiB,YAAO3D,KAAK7B,MAC7ByF,EAAc5D,KAAKlD,YAAY,GACnCkD,KAAK7B,KAAKN,KAAK+F,GACf,IAAItF,EAAO,YAAO0B,KAAKlD,aACvBwB,EAAQE,OAAOF,EAAQG,QAAQmF,GAAc,GAC7C5D,KAAKkD,WACLO,EAAgBzD,KAAKf,cAAcL,OACnCoB,KAAK7B,KAAL,YAAgBwF,GAGhB,IAAIE,EAAW7D,KAAKhD,KAAK,GACzBgD,KAAK7B,KAAKN,KAAKgG,GACf,IAAIC,EAAQ,YAAO9D,KAAKhD,MAMxB,GALA8G,EAAStF,OAAOsF,EAASrF,QAAQoF,GAAW,GAC5C7D,KAAKkD,WACLQ,EAAa1D,KAAKf,cAAcL,OAChCoB,KAAK7B,KAAL,YAAgBwF,GAEZF,EAAgBC,EAAY,CAC5B,IAAIE,EAAc5D,KAAKlD,YAAY,GACnCkD,KAAK7B,KAAKN,KAAK+F,GACf,IAAItF,EAAO,YAAO0B,KAAKlD,aACvBwB,EAAQE,OAAOF,EAAQG,QAAQmF,GAAc,GAC7C5D,KAAKlD,YAAL,YAAuBwB,QACpB,GAAIoF,EAAaD,EAAe,CACnC,IAAII,EAAW7D,KAAKhD,KAAK,GACzBgD,KAAK7B,KAAKN,KAAKgG,GACf,IAAIC,EAAQ,YAAO9D,KAAKhD,MACxB8G,EAAStF,OAAOsF,EAASrF,QAAQoF,GAAW,GAC5C7D,KAAKhD,KAAL,YAAgB8G,QAGhB,GAAI9D,KAAKhD,KAAK,GAAG0B,MAAQsB,KAAKlD,YAAY,GAAG4B,MAAO,CAChD,IAAIkF,EAAc5D,KAAKlD,YAAY,GACnCkD,KAAK7B,KAAKN,KAAK+F,GACf,IAAItF,EAAO,YAAO0B,KAAKlD,aACvBwB,EAAQE,OAAOF,EAAQG,QAAQmF,GAAc,GAC7C5D,KAAKlD,YAAL,YAAuBwB,OACpB,CACH,IAAIuF,EAAW7D,KAAKhD,KAAK,GACzBgD,KAAK7B,KAAKN,KAAKgG,GACf,IAAIC,EAAQ,YAAO9D,KAAKhD,MACxB8G,EAAStF,OAAOsF,EAASrF,QAAQoF,GAAW,GAC5C7D,KAAKhD,KAAL,YAAgB8G,GAIxB9D,KAAKkD,WACL,IAEIa,EAQAC,EACAC,EAXAzD,EAAW,YAAIR,KAAK7B,MAAM4D,QAAO,SAAA7F,GAAI,OAAK,EAAK+C,cAAciF,OAAO/C,SAASjF,MAC7EiI,EAAa,EAEjB3D,EAAS1B,SAAQ,SAAA5C,GACTA,EAAKwC,MAAQyF,IACbA,EAAajI,EAAKwC,MAClBqF,EAAiB7H,MAMzB8D,KAAK7B,KAAKW,SAAQ,SAAC5C,EAAM8C,GACjB9C,EAAKwC,OAASqF,EAAerF,OAASxC,EAAKmD,MAAQ0E,EAAe1E,OAClE2E,EAAqBhF,EACrBiF,EAAgB/H,MAIxB8D,KAAKlD,YAAYyB,QAAQ0F,GACzBjE,KAAK7B,KAAKK,OAAOwF,EAAoB,GAIzC,MAAO,W,KCzRAI,G,YAvCD,WACV,IAAM7H,EAAUC,cADA,EAG0EI,qBAAWC,GAA9FwH,EAHS,EAGTA,WAAYC,EAHH,EAGGA,cAAwB/G,GAH3B,EAGkBD,QAHlB,EAG2BC,YAAYgH,EAHvC,EAGuCA,cAAeC,EAHtD,EAGsDA,iBAiBtE,OACI,yBAAKzG,UAAU,SACX,gDAGCwG,EACG,wBAAIxG,UAAU,WAAd,gBAEA,0BAAM0G,SAAU,SAAAxG,GAAC,OAvBZ,SAAAA,GACbA,EAAEC,iBACFoG,EAAcD,GACd9G,EAAW,CACP,IAAI+C,EAAO+D,GACX,IAAI/D,EAAO,cAEfkE,GAAiB,GAEjB,IAAME,EAA8C,IAA9BnF,KAAKoF,MAAsB,EAAhBpF,KAAKqF,UACtCC,YAAW,WACPtI,EAAQsB,KAAK,WACd6G,GAW0BI,CAAS7G,IAAIF,UAAU,YACxC,2BAAOgH,QAAQ,QAAf,mBACA,2BAAOC,KAAK,OAAOlH,KAAK,OAAOmH,GAAG,YAAYC,YAAY,OAAOxG,MAAO2F,EAAYc,SAAU,SAAAlH,GAAMqG,EAAcrG,EAAEmH,OAAO1G,UAC3H,2BAAOsG,KAAK,SAAStG,MAAM,kBCwOhC2G,EAxQF,WACT,IAAM9I,EAAUC,cADD,EAESC,mBAAS,IAFlB,mBAERO,EAFQ,KAEFC,EAFE,OAGuBR,mBAAS,IAHhC,mBAGRK,EAHQ,KAGKC,EAHL,OAIiBN,oBAAS,GAJ1B,mBAIR6I,EAJQ,KAIEC,EAJF,OAKqG3I,qBAAWC,GAAxHK,EALQ,EAKRA,UAAWsI,EALH,EAKGA,cAAeC,EALlB,EAKkBA,cAAeC,EALjC,EAKiCA,iBAA6CpI,GAL9E,EAKmD+G,WALnD,EAK+DC,cAL/D,EAK8EhH,SAASC,EALvF,EAKuFA,WALvF,EAOuBd,qBAPvB,mBAORW,EAPQ,KAOKC,EAPL,KASTF,EAAe,SAAAwI,GACjBD,EAAiBxI,GACjBsI,EAAcG,IAGZC,EAAaC,mBA0LnB,OA1FArI,qBAAU,gBACasI,IAAfxI,EAAQ,GACRA,EAAQwB,SAAQ,SAAA1C,GACZA,EAAO+B,KAAO,MAGlB5B,EAAQsB,KAAR,KAhFa,WACjB,IAAI+E,EAAQ,GACZmD,OAAOC,KAAK/F,GAAOf,KAAI,SAAAG,GACnB,IAAK,IAAIX,EAAM,EAAGA,EAAM,GAAIA,IAAS,CACjC,IAAIuH,EAAU,IAAIlG,EAAKV,EAAMX,GAC7BkE,EAAM/E,KAAKoI,OAGnBhJ,EAAQ2F,GA2ERsD,GAEArB,YAAW,WACHe,GACAA,EAAWO,QAAQC,UAExB,OAEJ,IAGH5I,qBAAU,WAuBe,YAAjBiI,IACAxI,EAAQ,YAAIK,EAAQ,GAAGN,OACvBD,EAAe,YAAIO,EAAQ,GAAGR,eAMjB,YAAbI,GACA2H,YAAW,WACP1H,EACIG,EAAQ,GAAG+I,kBAEhB9G,KAAKoF,MAAsB,IAAhBpF,KAAKqF,UAAmB,OAE3C,CAAC1H,IAMJM,qBAAU,WACNF,EAAQwB,SAAQ,SAAA1C,GACZA,EAAOU,YAAP,YAAyBA,GACzBV,EAAOY,KAAP,YAAkBA,QAEvB,CAACF,EAAaE,IAEjBQ,qBAAU,WAEN,GAAIR,EAAK4B,OAAS,GAAgB,YAAX1B,EAAuB,CAE1C,IAAIkB,EAAU,YAAOtB,GACjB+B,EAAUT,EACdA,EAAa,CAACA,EAAW,IAEzBS,EAAQC,SAAQ,SAACC,EAAGC,GACZD,GAAKX,EAAW,IAChBS,EAAQL,OAAOQ,EAAO,MAI9B/B,EAAQ4B,GACR9B,EAAeqB,MAEpB,CAACpB,EAAMF,IAGN,kBAACD,EAAYyJ,SAAb,CAAsB5H,MAAO,CAAC5B,cAAaC,iBAAgBC,OAAMC,UAASsJ,WAAYjJ,EAAQ,GAAIJ,YAAWC,eAAcC,cAAaC,iBAAgBC,UAASC,eAC7J,yBAAKQ,UAAU,SACTuH,GACE,4BAAQtH,QAAS,SAAAC,GACbA,EAAEC,iBACFqH,GAAY,GA/JnB,WAET,IADA,IAAIiB,GAAa,EACVA,GAAY,CAGf,IAFA,IAAIC,EAAY,YAAOzJ,GAEdyF,EAAE,EAAGA,EAAE,GAAIA,IAAK,CAGrB,IAFA,IAAI5D,EAAO,YAAO4H,GACdvF,EAAY3B,KAAKoF,MAAMpF,KAAKqF,SAAW/F,EAAQD,OAAO,IACrC,GAAdsC,GACHA,EAAY3B,KAAKoF,MAAMpF,KAAKqF,SAAW/F,EAAQD,OAAO,GAE1D,IAAI1C,EAAO2C,EAAQqC,GACnB5D,EAASmF,EAAE,GAAItE,KAAKN,KAAK3B,GACzB2C,EAAQL,OAAO0C,EAAW,GAC1BuF,EAAY,YAAO5H,GAGvB5B,EAAQwJ,EAAalE,MAAK,iBAAM,GAAKhD,KAAKqF,aAI1C,IAFA,IAAI/F,EAAO,YAAO4H,GACdvF,EAAY3B,KAAKoF,MAAMpF,KAAKqF,SAAW/F,EAAQD,OAAO,IACrC,GAAdsC,GACHA,EAAY3B,KAAKoF,MAAMpF,KAAKqF,SAAW/F,EAAQD,OAAO,GAE1D7B,EAAe,CAAC8B,EAAQqC,KACxBrC,EAAQL,OAAO0C,EAAW,GAC1BuF,EAAY,YAAO5H,GAEnB5B,EAAQwJ,EAAalE,MAAK,iBAAM,GAAKhD,KAAKqF,aAE1C4B,GAAa,EAETC,EAAa1E,QAAO,SAAA7F,GAAI,OAAIY,EAAYqE,SAASjF,MAAO0C,QAAU,IAClE4H,GAAa,GAGbC,EAAa1E,QAAO,SAAA7F,GAAI,OAAIoB,EAAQ,GAAGa,KAAKgD,SAASjF,MAAO0C,QAAU,IACtE4H,GAAa,GAGbC,EAAa1E,QAAO,SAAA7F,GAAI,OAAIoB,EAAQ,GAAGa,KAAKgD,SAASjF,MAAO0C,QAAU,IACtE4H,GAAa,GAGblJ,EAAQ,GAAGa,KAAK4D,QAAO,SAAA7F,GAAI,OAAIoB,EAAQ,GAAGa,KAAKgD,SAASjF,MAAO0C,QAAU,IACzE4H,GAAa,GAGb1J,EAAYiF,QAAO,SAAA7F,GAAI,OAAIoB,EAAQ,GAAGa,KAAKgD,SAASjF,MAAO0C,QAAU,IACrE4H,GAAa,GAGb1J,EAAYiF,QAAO,SAAA7F,GAAI,OAAIoB,EAAQ,GAAGa,KAAKgD,SAASjF,MAAO0C,QAAU,IACrE4H,GAAa,GAOrBrJ,EAAa,QAoGGuJ,IACDzB,GAAG,UAAU0B,IAAKf,GAJrB,WAOHtI,EAAQ,IACL,4BAAKA,EAAQ,GAAGQ,KAAhB,WAA8BR,EAAQ,GAAGK,OAG7C,yBAAKI,UAAU,YACVT,EAAQ,IAAMA,EAAQ,GAAGa,KAAKe,KAAI,SAAChD,EAAM0K,GAEtC,OAAQ,kBAAC,EAAD,CAAe1K,KAAMA,EAAMC,UAAU,EAAOC,OAAQkB,EAAQ,GAAIhB,KAAM,CAACwB,KAAM,eAAgB6I,IAAKrJ,EAAQ,GAAGa,YAI7H,6BAEA,yBAAKJ,UAAS,qBAA2B,YAAXb,EAAwB,YAAc,KAEhE,yBAAKa,UAAU,eAEX,kBAAC,EAAD,CAAe7B,KAAM,IAAI6D,EAAK,SAAU,MAAO5D,UAAU,EAAOC,OAAQ,KAAMC,SAAS,KAG3F,yBAAK0B,UAAU,eACX,kBAAC,EAAD,CAAe7B,KAAMc,EAAK,GAAIb,UAAU,EAAOC,OAAQ,KAAME,KAAM,CAACwB,KAAM,OAAQ6I,IAAK3J,MAG3F,yBAAKe,UAAU,eACX,kBAAC,EAAD,CAAe7B,KAAMY,EAAY,GAAIX,UAAU,EAAMC,OAAQ,KAAME,KAAM,CAACwB,KAAM,UAAW6I,IAAK7J,OAIxG,6BAEA,yBAAKiB,UAAS,mBAAyB,YAAXb,EAAwB,YAAc,KAC7DI,EAAQ,IAAMA,EAAQ,GAAGa,KAAKe,KAAI,SAAChD,EAAM0K,GAEtC,OAAQ,kBAAC,EAAD,CAAe1K,KAAMA,EAAMC,UAAU,EAAMC,OAAQkB,EAAQ,GAAIhB,KAAM,CAACwB,KAAM,OAAQ6I,IAAKrJ,EAAQ,GAAGa,YAIpH,wBAAIJ,UAAU,aAAab,EAzOlB,SAAAyI,GACjB,OAAQA,GACJ,IAAK,OACD,MAAO,YAGX,IAAK,UACD,MAAO,UAGX,IAAK,WACD,MAAM,GAAN,OAAUrI,EAAQ,GAAGQ,KAArB,WAGJ,QACI,OAAO6H,GA0NgCkB,CAAa3J,GAAa,IAEhEI,EAAQ,IACL,yBAAKS,UAAU,gBACX,4BAAKT,EAAQ,GAAGQ,KAAhB,WAA8BR,EAAQ,GAAGK,OACzC,yBAAK+B,MAAO,CAACoH,SAAU,KACvB,yCAAexJ,EAAQ,GAAGI,eAA1B,W,yBChQlBqJ,G,MACF,WAAYC,EAAQrJ,EAAOsJ,GAAO,oBAC9BjH,KAAKgH,OAASA,EACdhH,KAAKrC,MAAQA,EACbqC,KAAKiH,KAAOA,EACZjH,KAAKkH,UAAYC,KAAKC,QAgIfC,EA5HF,WACT,IAAM9K,EAAUC,cADD,EAG2EI,qBAAWC,GAA9FwH,EAHQ,EAGRA,WAA2B/G,GAHnB,EAGIgH,cAHJ,EAGmBhH,SAHnB,KAG4BC,WAH5B,EAGwCgH,cAHxC,EAGuDC,iBACtC/H,mBAAS,KAJ1B,mBAIR6K,EAJQ,KAIEC,EAJF,OAK6B9K,mBAAS,IALtC,mBAKR+K,EALQ,KAKQC,EALR,OAMmBhL,oBAAS,GAN5B,6BAQfe,qBAAU,gBACasI,IAAfxI,EAAQ,IACRf,EAAQsB,KAAR,OAEL,IAEH,IAgBM6J,EAAe,SAAAC,GAIjB,IAHA,IAAIC,EAA2B,iBAAZD,EAAuBE,KAAKC,MAAMH,GAAYA,EAC7DI,EAAM,oEAEDtF,EAAI,EAAGA,EAAImF,EAAMhJ,OAAQ6D,IAAK,CACnC,IAAIuF,EAAO,GACX,IAAK,IAAIhJ,KAAS4I,EAAMnF,GACR,IAARuF,IAAYA,GAAQ,KAExBA,GAAQJ,EAAMnF,GAAGzD,GAGrB+I,GAAOC,EAAO,OAGlB,OAAOD,GAQLE,EAAY,uCAAG,4BAAA3E,EAAA,6DACX4E,EADW,UACFtI,IADE,uDAESuI,MAAMD,EAAK,CACjCE,OAAQ,OACRC,KAAM,OACNC,QAAS,CACT,OAAU,mBACV,eAAgB,oBAEpBC,KAAMV,KAAKW,UAAU,CAACC,aAAcf,EAAaJ,OAThC,yDAAH,qDAyClB,OA5BA9J,qBAAU,WACN,IAAIkL,EAAS,EACTC,EAAM,EACNC,EAAQC,aAAY,WACpB,GAAY,GAARH,GAAkB,GAALC,EACbV,IACA1L,EAAQsB,KAAK,SACbiL,cAAcF,QASd,GAPAG,SAASC,eAAe,SAASC,UAAjC,4BAAkEP,EAAlE,wBAAwFC,EAAxF,cACAA,EACU,IACND,IACAC,EAAM,IAGNA,EAAM,IAAM,EAAG,CACf,IAAIhL,EAAQ,OACEmI,IAAVxI,IACAK,EAAQL,EAAQ,GAAGK,OAEvB,IAAIuL,EAAU,IAAInC,EAAQ,YAAapJ,EAAO,qBAC9C4J,GAAY,SAAA4B,GAAe,4BAAQA,GAAR,CAAyBD,UAG7D,OACJ,IAGC,kBAACrM,EAAYyJ,SAAb,CAAsB5H,MAAO,CAAC2F,eAC9B,yBAAKtG,UAAU,QACX,gDACA,oCACA,wBAAIkH,GAAG,SAAP,OAEA,yBAAKlH,UAAU,gBACX,4BACKuJ,EAASpI,KAAI,SAAAgK,GACV,OACI,yBAAKnL,UAAS,kBAAamL,EAAQlC,SAAS3C,EAAa,aAAe,KACpE,4BAAK6E,EAAQlC,QACb,2BAAIkC,EAAQjC,WAK5B,yBAAKlJ,UAAU,WACf,0BAAM0G,SAAU,SAAAxG,GAAC,OAnGT,SAAAA,GAChBA,EAAEC,iBACF,IAAIP,EAAQ,OACEmI,IAAVxI,IAGIK,EADA0G,GAAc/G,EAAQ,GAAGQ,KACjBR,EAAQ,GAAGK,MAEXL,EAAQ,GAAGK,OAG3B,IAAIuL,EAAU,IAAInC,EAAQ1C,EAAY1G,EAAO6J,GAC7CD,EAAY,GAAD,mBAAKD,GAAL,CAAe4B,KAC1BzB,EAAkB,IAsFW2B,CAAYnL,KAC7B,8BAAU+G,KAAK,OAAOlH,KAAK,UAAUmH,GAAG,cAAcC,YAAY,UAAUxG,MAAO8I,EAAgBrC,SAAU,SAAAlH,GAAC,OAlExG,SAAAA,GAClBA,EAAEC,iBACFuJ,EAAkBxJ,EAAEmH,OAAO1G,OAgEmG2K,CAAcpL,MAChI,2BAAO+G,KAAK,SAAStG,MAAM,OAAO4K,SAA2B,KAAjB9B,SCzH5C+B,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCFN,IAAMC,EAAM,WAAO,IAAD,EAEmBnN,mBAAS,MAF5B,mBAETS,EAFS,KAEEsI,EAFF,OAG0B/I,mBAAS,IAHnC,mBAGTgJ,EAHS,KAGMC,EAHN,OAIoBjJ,mBAAS,YAJ7B,mBAIT4H,EAJS,KAIGC,EAJH,OAK0B7H,oBAAS,GALnC,mBAKT8H,EALS,KAKMC,EALN,OAMc/H,mBAAS,IANvB,mBAMTa,EANS,KAMAC,EANA,KAQhB,OACE,kBAACV,EAAYyJ,SAAb,CAAsB5H,MAAO,CAACxB,YAAWsI,gBAAeC,gBAAeC,mBAAkBrB,aAAYC,gBAAehH,UAASC,aAAYgH,gBAAeC,qBACtJ,kBAAC,IAAD,CAAQqF,SAAU,KACd,yBAAK9L,UAAU,aACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO+L,OAAK,EAACC,KAAK,KAChB,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,SAChB,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOD,OAAK,EAACC,KAAK,SAChB,kBAAC,EAAD,YAShBC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFnB,SAASC,eAAe,SDkFpB,kBAAmBmB,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAMxB,c","file":"static/js/main.ed0ac65c.chunk.js","sourcesContent":["import React from 'react'\n\nconst gameContext = React.createContext({})\n\nexport default gameContext","import React, {useEffect, useState, useContext} from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport GameContext from '../context/GameContext'\nimport '../style/card.css'\n\nconst CardComponent = ({card, isFaceUp, player, isKnock=false, pile}) => {\n    const history = useHistory()\n\n    const [isFaceUpState, setIsFaceUpSate] = useState(false)\n    const {discardPile, setDiscardPile, deck, setDeck, gameState, setGameState, currentCard, setCurrentCard, players, setPlayers} = useContext(GameContext)\n\n    useEffect(() => {\n        setIsFaceUpSate(isFaceUp)\n    }, [])\n\n    const mapToPNG = card => {\n        let value\n        switch (card.value) {\n            case 1:\n                value = 'A'\n                break;\n\n            case 11:\n                value = 'J'\n                break;\n\n            case 12:\n                value = 'Q'\n                break;\n\n            case 13:\n                value = 'K'\n                break;\n        \n            default:\n                value = card.value\n                break;\n        }\n        return `${value}${card.suit[0].toUpperCase()}.png`\n    }\n\n    const checkGinPlayer = () => {\n        if (players[0].calcDeadwood() == 0) {\n            players[0].score += 25 + players[1].calcDeadwood()\n            \n            //console.log('Player 1 score', players[0].score)\n            //console.log('Player 2 score', players[1].score)\n\n            if (players[0].score >= 100) {\n                alert(`You won by going Gin`)\n                history.push('/')\n            } else {\n                alert(`You went Gin and gained ${25+players[1].calcDeadwood()} points`)\n                history.push('/chat')\n                //console.log('chat')\n            }\n        }\n\n        if (players[1].calcDeadwood() == 0) {\n            //console.log('player 2 score before calc', players[1].score)\n            //console.log('player 1 deadwood', players[0].calcDeadwood())\n            players[1].score += 25 + players[0].calcDeadwood()\n\n            //console.log('Player 1 score', players[0].score)\n            //console.log('Player 2 score', players[1].score)\n\n            if (players[1].score >= 100) {\n                alert(`${players[1].name} went Gin and won`)\n                history.push('/')\n            } else {\n                alert(`${players[1].name} went Gin and gained ${25+players[0].calcDeadwood()} points`)\n                history.push('/chat')\n            }\n        }\n    }    \n\n    const faceUpClicked = e => {\n        checkGinPlayer()\n\n        if (player==null && gameState=='draw') {\n            e.preventDefault()\n            players[0].hand.push(card)\n            let tmpDiscard = [...discardPile]\n            // tmpPile.splice(tmpPile.indexOf(card), 1)\n            tmpDiscard.shift()\n            setDiscardPile(tmpDiscard)\n            players[0].calcDeadwood()\n            // checkGinPlayer()\n            setGameState('discard')\n        }\n\n        if (player===players[0] && gameState=='discard') {\n            e.preventDefault()\n\n            if (players[0].calcDeadwood() > 10) {\n                let tmpPile = [...discardPile]\n                tmpPile.unshift(card)\n                setDiscardPile(tmpPile)\n                players[0].hand.splice(players[0].hand.indexOf(card), 1)\n                // checkGinPlayer()\n                setGameState('opponent')\n            } else if (players[0].calcDeadwood() - (card.value<11 ? card.value : 10) === 0) {\n                let tmpPile = [...discardPile]\n                tmpPile.unshift(card)\n                setDiscardPile(tmpPile)\n                players[0].hand.splice(players[0].hand.indexOf(card), 1)\n                checkGinPlayer()\n            } else {\n                //highlight knock and discard piles\n                setGameState('knock-discard')\n                setCurrentCard(card)\n            }\n        }\n\n        if (pile.name=='discard' && gameState=='knock-discard') {\n                let tmpPile = [...discardPile]\n                //console.log('currentCard', currentCard)\n                tmpPile.unshift(currentCard)\n                setDiscardPile(tmpPile)\n                players[0].hand.splice(players[0].hand.indexOf(currentCard), 1)\n                // checkGinPlayer()\n                setGameState('opponent')\n        }\n    }\n\n    const faceDownClicked = e => {\n        checkGinPlayer()\n\n        if (player==null && gameState=='draw') {\n            e.preventDefault()\n            players[0].hand.push(card)\n            let tmpPile = [...deck]\n            tmpPile.splice(tmpPile.indexOf(card), 1)\n\n            if (deck.length < 1) {\n                let tmpDiscard = [...discardPile]\n                let tmpDeck = tmpDiscard\n                tmpDiscard = [tmpDiscard[0]]\n    \n                tmpDeck.forEach((c, index) => {\n                    if (c == tmpDiscard[0]) {\n                        tmpDeck.splice(index, 1)\n                    }\n                })\n                setDiscardPile(tmpDiscard)\n            }\n\n            setDeck(tmpPile)\n            // checkGinPlayer()\n            setGameState('discard')\n        }\n\n        if (isKnock && gameState=='knock-discard') {\n            players[1].calcDeadwood()\n            //console.log('deadwood before', players[1].deadwoodCards)\n            players[0].possibleMelds.map(meld=> {\n                if (meld.length == 3)\n                {\n                    players[1].deadwoodCards.map((card, index) => {\n                        if (meld[0].value == meld[1].value == card.value)\n                        {\n                            players[1].deadwoodCards.splice(index, 1)\n                            return\n                        }\n                        if ((meld[0].suit == meld[1].suit == card.suit) && ((card.value == meld[0].value-1) || (card.value == meld[2].value+1)))\n                        {\n                            players[1].deadwoodCards.splice(index, 1)\n                            return\n                        }\n                    })\n                }\n            })\n            //console.log('deadwood after', players[1].deadwoodCards)\n\n            let theirDeadwood = 0\n            players[1].deadwoodCards.map(card =>{\n                theirDeadwood += (card.value<11 ? card.value : 10)\n            })\n            players[0].score += theirDeadwood - players[0].calcDeadwood()\n            //console.log('their deadwood', theirDeadwood)\n            //console.log('our score', players[0].score)\n            if (players[0].score >= 100) {\n                alert(`You won by knocking!`)\n                history.push('/')\n            } else {\n                alert(`You knocked and ${theirDeadwood - players[0].calcDeadwood() > -1 ? 'gained' : 'lost'} ${Math.abs(theirDeadwood - players[0].calcDeadwood())} points`)\n                history.push('/chat')\n                //console.log('chat')\n            }\n            // let oldDeadwoodCards= players[0].deadwoodCards\n            // let tmpPile = [...discardPile]\n            // tmpPile.unshift(card)\n            // setDiscardPile(tmpPile)\n            // players[0].hand.splice(players[0].hand.indexOf(card), 1)\n            // players[0].getMelds()\n            // let melds = players[0].bestMelds\n            // players[1].calcDeadwood()\n            // let player2Deadwood = players[1].deadwoodCards\n            // players[0].hand.push(player2Deadwood)\n            // players[0].getMelds()\n            // players[0].calcDeadwood()\n            // let newDeadwoodCards = players[0].deadwoodCards\n            // //console.log('oldDeadwoodCards', oldDeadwoodCards)\n            // //console.log('newDeadwoodCards', newDeadwoodCards)\n            // let trueDeadwoodCards = oldDeadwoodCards.filter(value => newDeadwoodCards.includes(value))\n            // //console.log('trueDeadwoodCards', trueDeadwoodCards)\n        }\n    }\n\n    return (\n        <>\n            {card && (\n                <div className=\"Card\"\n                    onClick={e => isFaceUpState ? faceUpClicked(e) : faceDownClicked(e)}\n                    style={{\n                        backgroundImage: isKnock ? `url('${process.env.PUBLIC_URL}/card-images/knock.png')` : (\n                            `url(\"${process.env.PUBLIC_URL + `/card-images/${isFaceUpState\n                                ? mapToPNG(card) \n                                : 'purple_back.png' }`}\")`\n                        )\n                    }}\n\n                />\n            )}\n        </>\n    )\n}\n\nexport default CardComponent","class Card {\n    suit = null\n    value = 0\n\n    constructor(suit, value) {\n        this.suit = suit\n        this.value = value\n    }\n}\n\nconst suits = {\n    HEARTS: 'hearts',\n    CLUBS: 'clubs',\n    SPADES: 'spades',\n    DIAMONDS: 'diamonds'\n}\n\nexport {Card, suits}","// import React, {useContext} from 'react'\n// import GameContext from '../context/GameContext'\n\nclass Player {\n    name = ''\n    score = 0\n    hand = []\n    possibleMelds = []\n    bestMelds = []\n    discardPile = []\n    deck = []\n    deadwoodCards = []\n    deadwood = 0\n\n    constructor(name) {\n        this.name = name\n    }\n\n    highestValueMeld() {\n        let bestMeldValue = 0\n        let bestMeld = null\n        let otherCards = []\n        this.possibleMelds.map((meld, index, melds) => {\n            let cardsInMeld = meld\n            let cardContested = false\n            let meldValue = 0\n            this.possibleMelds.map((meld2, index2, melds2) => {\n                if (index != index2)\n                {\n                    meld2.map((card, cardIndex) => {\n                        //if card is in cards in meld\n                        otherCards.push(card)\n                        if (cardsInMeld.includes(card)) {\n                            cardContested = true\n                        }\n                    })\n                }\n            })\n            meld.map((card2, cardIndex2) => {\n                if (!otherCards.includes(card2))\n                {\n                    meldValue+= card2.value < 11 ? card2.value : 10\n                }\n            })\n            if(!cardContested)\n            {\n                meldValue += 1000\n            }\n            if (meldValue >= bestMeldValue)\n            {\n                bestMeld = meld\n            }\n        })\n        return bestMeld\n    }\n\n    highestValueMeld2() {\n        let highestEffeciency = 0\n        let highestEfficiencyIndex = 0\n\n        let cardCounts = []\n        let contestedCards = []\n\n        this.possibleMelds.map((meld, index, melds) => {\n            let sum = 0\n            meld.map(card => {\n                \n                let isInArray = false\n                cardCounts.map(obj => {\n                    if (obj.card.value == card.value && obj.card.suit == card.suit) {\n                        isInArray = true\n                    }\n                })\n\n                if (isInArray) {\n                    cardCounts.map(obj => {\n                        if (obj.card.value == card.value && obj.card.suit == card.suit) {\n                            obj.count++\n                        }\n                    })\n                } else {\n                    cardCounts.push({card, count: 1})\n                }\n                sum+= card.value < 11 ? card.value : 10\n            })\n\n            cardCounts.map(obj => {\n                if (obj.count > 1) contestedCards.push(obj.card)\n            })\n\n            let intersection = meld.filter(value => contestedCards.includes(value))\n\n            // //console.log('intersection', intersection)\n\n\n            let efficiency = sum / (intersection.length>0 ? intersection.length : 1)\n            //console.log('meld', meld)\n            // //console.log(efficiency, contestedCards, meld)\n            // //console.log({efficiency, highestEffeciency})\n            if (efficiency > highestEffeciency) {\n                highestEffeciency = efficiency\n                highestEfficiencyIndex = index\n            } else if (efficiency == highestEffeciency) {\n                //TODO: the problem is here\n                this.bestMelds.push(meld)\n                // this.possibleMelds.splice(index, 1)\n            }\n        })\n\n        let bestMeld = this.possibleMelds[highestEfficiencyIndex]\n        return bestMeld\n    }\n\n    checkHandForSets(max=3) {\n        this.possibleMelds = []\n        let sortedHand = [...this.hand]\n\n        let hearts = sortedHand.filter(card => card.suit == 'hearts')\n        let diamonds = sortedHand.filter(card => card.suit == 'diamonds')\n        let clubs = sortedHand.filter(card => card.suit == 'clubs')\n        let spades = sortedHand.filter(card => card.suit == 'spades')\n\n        hearts.sort((card1, card2) => card1.value - card2.value)\n        diamonds.sort((card1, card2) => card1.value - card2.value)\n        clubs.sort((card1, card2) => card1.value - card2.value)\n        spades.sort((card1, card2) => card1.value - card2.value)\n\n        sortedHand = [...hearts, ...diamonds, ...clubs, ...spades]\n\n        for (let i=1; i<14; i++) {\n            let tmpMeld = []\n            let j = 0\n            this.hand.map(card => {\n                if (card.value == i) {\n                    tmpMeld.push(card)\n                    j++\n                }\n            })\n            if (j>=max) {\n                this.possibleMelds.push(tmpMeld)\n            }\n        }\n\n        let j = 0\n        let tmpMeld = []\n        sortedHand.map((card, index, cards) => {\n            if (index != sortedHand.length-1) {\n                let nextCard = cards[index+1]\n                if (nextCard.value == card.value + 1 && nextCard.suit == card.suit) {\n                    j++\n                    tmpMeld.push(card)\n                    if (index == sortedHand.length-2 && j>=3) {\n                        tmpMeld.push(nextCard)\n                        if (tmpMeld.length > 0) {\n                            this.possibleMelds.push(tmpMeld)\n                        }\n                    }\n                } else {\n                    if (j>=max) {\n                        tmpMeld.push(card)\n                        if (tmpMeld.length > 0) {\n                            this.possibleMelds.push(tmpMeld)\n                        }\n                    }\n                    j = 0\n                    tmpMeld = []\n                }\n            }\n\n        })\n    }\n\n    filterMelds() {\n        let bestMeld = this.highestValueMeld()\n        this.bestMelds.push(bestMeld)\n\n        let possibleMeldsTmp = [...this.possibleMelds]\n\n        //console.log('possible melds', this.possibleMelds)\n\n        possibleMeldsTmp.map((meld, index) => {\n            bestMeld.map(card => {\n                if(meld.includes(card)) {\n                    possibleMeldsTmp.splice(index, 1)\n                    //console.log('FILTER', {meld, bestMelds: this.bestMelds})\n                }\n            })\n\n        })\n\n        \n        this.possibleMelds = possibleMeldsTmp\n        //console.log('post purge', this.possibleMelds)\n    }\n\n    getMelds() {\n        this.bestMelds = []\n        this.checkHandForSets()\n        while (this.possibleMelds.length > 0) {\n            this.filterMelds()\n        }\n    }\n\n    calcDeadwood() {\n        this.deadwoodCards = []\n        this.getMelds()\n        let value = 0\n\n        this.hand.map(card => {\n            let isCardInMeld = false\n            this.bestMelds.map(meld => {\n                if (meld.includes(card)) {\n                    isCardInMeld = true\n                }\n            })\n            if (!isCardInMeld) {\n                value+= card.value<11 ? card.value : 10\n                this.deadwoodCards.push(card)\n            }\n        })\n        this.deadwood = value\n        return value\n    }\n\n\n    arrDiff(a1, a2) {\n\n        var a = [], diff = [];\n    \n        for (var i = 0; i < a1.length; i++) {\n            a[a1[i]] = true;\n        }\n    \n        for (var i = 0; i < a2.length; i++) {\n            if (a[a2[i]]) {\n                delete a[a2[i]];\n            } else {\n                a[a2[i]] = true;\n            }\n        }\n    \n        for (var k in a) {\n            diff.push(k);\n        }\n    \n        return diff;\n    }\n\n    opponentTurn() {\n        this.getMelds()\n\n        if (this.calcDeadwood() == 0) {\n            //\n        } else {\n            this.checkHandForSets(2)\n\n            let discardLength, deckLength = 0\n\n            // discard pile\n            let previousHandState = [...this.hand]\n            let discardCard = this.discardPile[0]\n            this.hand.push(discardCard)\n            let tmpPile = [...this.discardPile]\n            tmpPile.splice(tmpPile.indexOf(discardCard), 1)\n            this.getMelds()\n            discardLength = this.possibleMelds.length\n            this.hand = [...previousHandState]\n\n            // deck pile\n            let deckCard = this.deck[0]\n            this.hand.push(deckCard)\n            let tmpPile2 = [...this.deck]\n            tmpPile2.splice(tmpPile2.indexOf(deckCard), 1)\n            this.getMelds()\n            deckLength = this.possibleMelds.length\n            this.hand = [...previousHandState]\n\n            if (discardLength > deckLength) {\n                let discardCard = this.discardPile[0]\n                this.hand.push(discardCard)\n                let tmpPile = [...this.discardPile]\n                tmpPile.splice(tmpPile.indexOf(discardCard), 1)\n                this.discardPile = [...tmpPile]\n            } else if (deckLength > discardLength) {\n                let deckCard = this.deck[0]\n                this.hand.push(deckCard)\n                let tmpPile2 = [...this.deck]\n                tmpPile2.splice(tmpPile2.indexOf(deckCard), 1)\n                this.deck = [...tmpPile2]\n            } else {\n                //same\n                if (this.deck[0].value > this.discardPile[0].value) {\n                    let discardCard = this.discardPile[0]\n                    this.hand.push(discardCard)\n                    let tmpPile = [...this.discardPile]\n                    tmpPile.splice(tmpPile.indexOf(discardCard), 1)\n                    this.discardPile = [...tmpPile]\n                } else {\n                    let deckCard = this.deck[0]\n                    this.hand.push(deckCard)\n                    let tmpPile2 = [...this.deck]\n                    tmpPile2.splice(tmpPile2.indexOf(deckCard), 1)\n                    this.deck = [...tmpPile2]\n                }\n            }\n\n            this.getMelds()\n            let deadwood = [...this.hand].filter(card => !this.possibleMelds.flat().includes(card))\n            let highestVal = 0\n            let highestValCard\n            deadwood.forEach(card => {\n                if (card.value > highestVal) {\n                    highestVal = card.value\n                    highestValCard = card\n                }\n            })\n\n            let cardToDiscardIndex\n            let cardToDiscard\n            this.hand.forEach((card, index) => {\n                if (card.value == highestValCard.value && card.suit == highestValCard.suit) {\n                    cardToDiscardIndex = index\n                    cardToDiscard = card\n                }\n            })\n\n            this.discardPile.unshift(cardToDiscard)\n            this.hand.splice(cardToDiscardIndex, 1)\n\n        }\n        \n        return 'draw'\n    }\n}\n\nexport default Player","import React, {useEffect, useState, useContext} from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport { createRenderer } from 'react-dom/test-utils'\nimport GameContext from '../context/GameContext'\nimport CardComponent from '../componentes/CardComponent'\nimport { Card, suits } from '../componentes/cards'\nimport Player from '../componentes/players'\nimport '../style/lobby.css'\n\nlet players = []\n\nconst Lobby = () => {\n    const history = useHistory()\n\n    const {playerName, setPlayerName, players, setPlayers, isFindingGame, setIsFindingGame} = useContext(GameContext)\n\n    const findGame = e => {\n        e.preventDefault()\n        setPlayerName(playerName)\n        setPlayers([\n            new Player(playerName),\n            new Player('Player 2')\n        ])\n        setIsFindingGame(true)\n\n        const sleepInterval = Math.floor(Math.random() * 1)*1000\n        setTimeout(() => {\n            history.push(\"/chat\")\n        }, sleepInterval)\n    }\n\n    return (\n        <div className=\"Lobby\">\n            <h1>Online Gin-Rummy</h1>\n\n            \n            {isFindingGame ? (\n                <h2 className=\"loading\">Searching...</h2>\n            ) : (\n                <form onSubmit={e => findGame(e)} className=\"nameForm\">\n                    <label htmlFor=\"name\">Enter your name</label>\n                    <input type=\"text\" name=\"name\" id=\"nameField\" placeholder=\"Name\" value={playerName} onChange={e => {setPlayerName(e.target.value)}}/>\n                    <input type=\"submit\" value=\"Find Game\"/>\n                </form>\n            )}\n\n        </div>\n    )\n}\n\nexport default Lobby","import React, {useEffect, useState, useContext, useRef} from 'react'\nimport { createRenderer } from 'react-dom/test-utils'\nimport { useHistory } from \"react-router-dom\"\nimport GameContext from '../context/GameContext'\nimport CardComponent from '../componentes/CardComponent'\nimport { Card, suits } from '../componentes/cards'\nimport Player from '../componentes/players'\nimport '../style/home.css'\nimport Lobby from './Lobby'\n\nconst Home = () => {\n    const history = useHistory()\n    const [deck, setDeck] = useState([])\n    const [discardPile, setDiscardPile] = useState([])\n    const [hasDealt, setHasDealt] = useState(false)\n    const {gameState, _setGameState, prevGameState, setPrevGameState, playerName, setPlayerName, players, setPlayers} = useContext(GameContext)\n    \n    const [currentCard, setCurrentCard] = useState()\n\n    const setGameState = state => {\n        setPrevGameState(gameState)\n        _setGameState(state)\n    }\n\n    const dealBtnRef = useRef();\n\n    const gameStateMap = state => {\n        switch (state) {\n            case 'draw':\n                return 'Draw Card'\n                break;\n\n            case 'discard':\n                return 'Discard'\n                break;\n\n            case 'opponent':\n                return `${players[1].name}'s turn`\n                break;\n        \n            default:\n                return state\n                break;\n        }\n    }\n\n    const generateDeck = () => {\n        let cards = []\n        Object.keys(suits).map(suit => {\n            for (let value=1; value<14; value++) {\n                let newCard = new Card(suit, value)\n                cards.push(newCard)\n            }\n        })\n        setDeck(cards)\n    }\n\n    const deal = () => {\n        let duplicates = true\n        while (duplicates) {\n            let otherTmpDeck = [...deck]\n\n            for (let i=0; i<20; i++) {\n                let tmpDeck = [...otherTmpDeck]\n                let cardIndex = Math.floor(Math.random() * tmpDeck.length-1)\n                while (cardIndex == -1) {\n                    cardIndex = Math.floor(Math.random() * tmpDeck.length-1)\n                }\n                let card = tmpDeck[cardIndex]\n                players[(i%2)].hand.push(card)\n                tmpDeck.splice(cardIndex, 1)\n                otherTmpDeck = [...tmpDeck]\n            }\n\n            setDeck(otherTmpDeck.sort(() => .5 - Math.random()))\n\n            let tmpDeck = [...otherTmpDeck]\n            let cardIndex = Math.floor(Math.random() * tmpDeck.length-1)\n            while (cardIndex == -1) {\n                cardIndex = Math.floor(Math.random() * tmpDeck.length-1)\n            }\n            setDiscardPile([tmpDeck[cardIndex]])\n            tmpDeck.splice(cardIndex, 1)\n            otherTmpDeck = [...tmpDeck]\n\n            setDeck(otherTmpDeck.sort(() => .5 - Math.random()))\n\n            duplicates = false\n\n            if (otherTmpDeck.filter(card => discardPile.includes(card)).length >= 1) {\n                duplicates = true\n            }\n\n            if (otherTmpDeck.filter(card => players[0].hand.includes(card)).length >= 1) {\n                duplicates = true\n            }\n\n            if (otherTmpDeck.filter(card => players[1].hand.includes(card)).length >= 1) {\n                duplicates = true\n            }\n\n            if (players[0].hand.filter(card => players[1].hand.includes(card)).length >= 1) {\n                duplicates = true\n            }\n\n            if (discardPile.filter(card => players[0].hand.includes(card)).length >= 1) {\n                duplicates = true\n            }\n\n            if (discardPile.filter(card => players[1].hand.includes(card)).length >= 1) {\n                duplicates = true\n            }\n\n        }\n\n\n        \n        setGameState('draw')        \n    }\n\n    useEffect(() => {\n        if (players[1] !== undefined) {\n            players.forEach(player => {\n                player.hand = []\n            })\n        } else {\n            history.push(`/`)\n        }\n\n        generateDeck()\n\n        setTimeout(() => {\n            if (dealBtnRef) {\n                dealBtnRef.current.click()\n            }\n        }, 100)\n\n    }, [])\n\n\n    useEffect(() => {\n        // let i = 0\n        // while (gameState == 'opponent' && i<2) {\n        //     setTimeout(//console.log('opponent'), 1000)\n        //     i++\n        // }\n\n        // //console.log('deck', deck)\n        //console.log('discardPile', discardPile)\n        // //console.log('player1', players[0].hand)\n        // //console.log('player2', players[1].hand)\n\n\n        if (players !== []) {\n            //console.log('player 1 deadwood', players[0].calcDeadwood())\n            //console.log('player 2 deadwood', players[1].calcDeadwood())\n            //console.log('player 1 possible melds', players[0].possibleMelds)\n            //console.log('player 1 best melds', players[0].bestMelds)\n            //console.log('player 2 possible melds', players[1].possibleMelds)\n            //console.log('player 2 best melds', players[1].bestMelds)\n        }\n\n\n        if (prevGameState == 'opponent') {\n            setDeck([...players[1].deck])\n            setDiscardPile([...players[1].discardPile])\n\n            //console.log('setDeck', deck)\n            //console.log('setDIscard', discardPile)\n        }\n\n        if (gameState == 'opponent') {\n            setTimeout(() => {\n                setGameState(\n                    players[1].opponentTurn()\n                )\n            }, Math.floor(Math.random() * 3000) + 1000)\n        }\n    }, [gameState])\n\n    // useEffect(() => {\n    //     //console.log('rerender')\n    // }, [deck])\n\n    useEffect(() => {\n        players.forEach(player => {\n            player.discardPile = [...discardPile]\n            player.deck = [...deck]\n        })\n    }, [discardPile, deck])\n\n    useEffect(() => {\n        //run out of cards in discrad pile\n        if (deck.length < 1 && gameState=='opponent') {\n            //console.log('prevGameSTate', prevGameState)\n            let tmpDiscard = [...discardPile]\n            let tmpDeck = tmpDiscard\n            tmpDiscard = [tmpDiscard[0]]\n\n            tmpDeck.forEach((c, index) => {\n                if (c == tmpDiscard[0]) {\n                    tmpDeck.splice(index, 1)\n                }\n            })\n\n            setDeck(tmpDeck)\n            setDiscardPile(tmpDiscard)\n        }\n    }, [deck, discardPile])\n\n    return (\n        <GameContext.Provider value={{discardPile, setDiscardPile, deck, setDeck, userPlayer: players[0], gameState, setGameState, currentCard, setCurrentCard, players, setPlayers}}>\n            <div className=\"Home\">\n                {!hasDealt && (\n                    <button onClick={e => {\n                        e.preventDefault()\n                        setHasDealt(true)\n                        deal()\n                    }} id=\"dealBtn\" ref={dealBtnRef}>Loading</button>\n                )}\n\n                {players[1] && (\n                    <h2>{players[1].name} Score: {players[1].score}</h2>\n                )}\n\n                <div className=\"cardList\">\n                    {players[1] && players[1].hand.map((card, key) => {\n                        // <li key={key}>{card.value == 1 ? 'ACE' : card.value}, {card.suit}</li>\n                        return (<CardComponent card={card} isFaceUp={false} player={players[1]} pile={{name: 'opponentHand', ref: players[1].hand}}/>)\n                    })}\n                </div>\n\n                <br/>\n                \n                <div className={`middleDeck ${gameState=='opponent' ? 'greyedOut' : ''}`}>\n\n                    <div className=\"cardWrapper\">\n                        {/* <img className=\"Card\" src={process.env.PUBLIC_URL + \"/card-images/knock.png\"} isKnock={true}/> */}\n                        <CardComponent card={new Card('hearts', null)} isFaceUp={false} player={null} isKnock={true}/>\n                    </div>\n\n                    <div className=\"cardWrapper\">\n                        <CardComponent card={deck[0]} isFaceUp={false} player={null} pile={{name: 'deck', ref: deck}}/>\n                    </div>\n\n                    <div className=\"cardWrapper\">\n                        <CardComponent card={discardPile[0]} isFaceUp={true} player={null} pile={{name: 'discard', ref: discardPile}}/>\n                    </div>\n                </div>\n\n                <br/>\n\n                <div className={`cardList ${gameState=='opponent' ? 'greyedOut' : ''}`}>\n                    {players[0] && players[0].hand.map((card, key) => {\n                        // <li key={key}>{card.value == 1 ? 'ACE' : card.value}, {card.suit}</li>\n                        return (<CardComponent card={card} isFaceUp={true} player={players[0]} pile={{name: 'hand', ref: players[0].hand}}/>)\n                    })}\n                </div>\n\n                <h2 className=\"gameState\">{gameState ? gameStateMap(gameState) : ''}</h2>\n\n                {players[0] && (\n                    <div className=\"player1Score\">\n                        <h2>{players[0].name} Score: {players[0].score}</h2>\n                        <div style={{flexGrow: 1}}/>\n                        <h2>Deadwood: {players[0].calcDeadwood()}/10</h2>\n                    </div>\n                )}\n\n            </div>\n        </GameContext.Provider>\n    )\n}\n\nexport default Home","import React, {useEffect, useState, useContext} from 'react'\nimport { useHistory } from \"react-router-dom\"\nimport { createRenderer } from 'react-dom/test-utils'\nimport GameContext from '../context/GameContext'\nimport CardComponent from '../componentes/CardComponent'\nimport { Card, suits } from '../componentes/cards'\nimport Player from '../componentes/players'\nimport '../style/chat.css'\n\nclass Message {\n    constructor(sender, score, text) {\n        this.sender = sender\n        this.score = score\n        this.text = text\n        this.timestamp = Date.now()\n    }\n}\n\nconst Chat = () => {\n    const history = useHistory()\n\n    const {playerName, setPlayerName, players, setPlayers, isFindingGame, setIsFindingGame} = useContext(GameContext)\n    const [messages, setMessages] = useState([])\n    const [currentMessage, setCurrentMessage] = useState('')\n    const [isLoading, setIsLoading] = useState(true)\n\n    useEffect(() => {\n        if (players[1] === undefined) {\n            history.push(`/`)\n        }\n    }, [])\n\n    const sendMessage = e => {\n        e.preventDefault()\n        let score = 0\n        if (players!==undefined) {\n            //console.log('players not undefined')\n            if (playerName == players[0].name) {\n                score = players[0].score\n            } else {\n                score = players[1].score\n            }\n        }\n        let message = new Message(playerName, score, currentMessage)\n        setMessages([...messages, message])\n        setCurrentMessage('')\n    }\n\n    const convertToCSV = objArray => {\n        var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray\n        var str = 'playerName, score, messageBody, messageTimestamp, playerScore\\r\\n'\n\n        for (var i = 0; i < array.length; i++) {\n            var line = ''\n            for (var index in array[i]) {\n                if (line != '') line += ','\n\n                line += array[i][index]\n            }\n\n            str += line + '\\r\\n'\n        }\n\n        return str\n    }\n\n    const messageChange = e => {\n        e.preventDefault()\n        setCurrentMessage(e.target.value)\n    }\n\n    const sendChatData = async () => {\n        const url = `${process.env.PUBLIC_URL}/e.c.stanton/studies/GinRummy/ginrummy.php`\n        const rawResponse = await fetch(url, {\n            method: 'POST',\n            mode: 'cors',\n            headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({results2send: convertToCSV(messages)})\n    })\n    }\n\n    useEffect(() => {\n        var minute = 2;\n        var sec = 0;\n        let timer = setInterval(() => {\n            if (minute==0 && sec==0) {\n                sendChatData()\n                history.push(\"/play\")\n                clearInterval(timer)\n            } else {\n                document.getElementById(\"timer\").innerHTML = `Round starting in ${minute} minutes and ${sec} seconds`\n                sec--\n                if (sec < 0) {\n                    minute --\n                    sec = 59;\n                }\n\n                if (sec % 10 == 0) {\n                    let score = 0\n                    if (players!==undefined) {\n                        score = players[1].score\n                    }\n                    let message = new Message('Fake User', score, 'Fake user message')\n                    setMessages(currentMessages => [...currentMessages, message])\n                }\n            }\n        }, 1000)\n    }, [])\n\n    return (\n        <GameContext.Provider value={{playerName}}>\n        <div className=\"Chat\">\n            <h1>Online Gin-Rummy</h1>\n            <h2>Chat</h2>\n            <h2 id=\"timer\">...</h2>\n\n            <div className=\"message-area\">\n                <ul>\n                    {messages.map(message => {\n                        return (\n                            <div className={`message ${message.sender===playerName ? 'ownMessage' : ''}`}>\n                                <h3>{message.sender}</h3>\n                                <p>{message.text}</p>\n                            </div>\n                        )\n                    })}\n                </ul>\n                <div className=\"spacer\"></div>\n                <form onSubmit={e => sendMessage(e)}>\n                    <textarea type=\"text\" name=\"message\" id=\"message-box\" placeholder=\"Message\" value={currentMessage} onChange={e => messageChange(e)}/>\n                    <input type=\"submit\" value=\"Send\" disabled={currentMessage===''}/>\n                </form>\n            </div>\n\n        </div>\n        </GameContext.Provider>\n    )\n}\n\nexport default Chat","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, {useState, useContext, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  HashRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport './style/index.css';\nimport Header from './componentes/Header'\nimport Home from './pages/Home'\nimport Chat from './pages/Chat'\nimport Lobby from './pages/Lobby'\nimport GameContext from './context/GameContext'\n\nimport * as serviceWorker from './serviceWorker';\n\nconst App = () => {\n  \n  const [gameState, _setGameState] = useState(null)\n  const [prevGameState, setPrevGameState] = useState('')\n  const [playerName, setPlayerName] = useState('Player 1')\n  const [isFindingGame, setIsFindingGame] = useState(false)\n  const [players, setPlayers] = useState([])\n  \n  return (\n    <GameContext.Provider value={{gameState, _setGameState, prevGameState, setPrevGameState, playerName, setPlayerName, players, setPlayers, isFindingGame, setIsFindingGame}}>\n      <Router basename={'/'}>\n          <div className=\"container\">\n            <Switch>\n              <Route exact path=\"/\">\n                <Lobby/>\n              </Route>\n              <Route exact path=\"/chat\">\n                <Chat/>\n              </Route>\n              <Route exact path=\"/play\">\n                <Home/>\n              </Route>\n            </Switch>\n          </div>\n      </Router>\n    </GameContext.Provider>\n  )\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}